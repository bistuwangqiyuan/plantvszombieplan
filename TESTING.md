# 测试指南

本文档提供了游戏功能的测试步骤和检查清单。

## 快速测试步骤

### 1. 启动本地服务器

```bash
# 使用Python
python -m http.server 8000

# 或使用Node.js
npx http-server -p 8000
```

访问：http://localhost:8000

### 2. 主菜单测试

- [ ] 页面正常加载，显示"植物大战僵尸 - 竖屏版"标题
- [ ] 背景渐变色正常显示（天蓝色到草绿色）
- [ ] 四个按钮都可见：开始游戏、关卡选择、游戏说明、重置进度
- [ ] 标题有跳动动画效果
- [ ] 按钮点击有视觉反馈

### 3. 关卡选择测试

点击"关卡选择"按钮：

- [ ] 显示5个关卡卡片
- [ ] 关卡1显示为已解锁（绿色边框）
- [ ] 关卡2-5显示为锁定状态（灰色）
- [ ] 点击已解锁关卡进入准备界面
- [ ] 点击锁定关卡显示提示信息
- [ ] 返回按钮正常工作

### 4. 关卡准备界面测试

点击关卡1：

- [ ] 显示关卡名称和目标
- [ ] 显示初始阳光数量（150）
- [ ] 显示可用植物列表（向日葵、豌豆射手、坚果墙）
- [ ] 每个植物显示图标、名称、消耗、冷却、描述
- [ ] "开始战斗"按钮可点击
- [ ] 返回按钮正常工作

### 5. 游戏战斗界面测试

点击"开始战斗"：

- [ ] 顶部状态栏显示阳光数量（150）
- [ ] 顶部状态栏显示波次（第1波/共5波）
- [ ] 植物选择栏显示可用植物卡片
- [ ] 战场显示5行×3列网格
- [ ] 底部提示栏显示操作提示
- [ ] 暂停按钮可用

### 6. 种植植物测试

1. **种植向日葵：**
   - [ ] 点击向日葵卡片（50阳光）
   - [ ] 空格子显示黄色预览
   - [ ] 点击任意空格子
   - [ ] 向日葵出现，播放生长动画
   - [ ] 阳光减少50（变为100）
   - [ ] 向日葵卡片进入冷却（5秒）

2. **种植豌豆射手：**
   - [ ] 点击豌豆射手卡片（100阳光）
   - [ ] 点击空格子种植
   - [ ] 阳光减少100（变为0）
   - [ ] 豌豆射手出现

3. **阳光不足测试：**
   - [ ] 阳光为0时，所有植物卡片变暗
   - [ ] 点击植物卡片显示"阳光不足"提示

### 7. 阳光系统测试

- [ ] 向日葵每15秒生产一个太阳（50阳光）
- [ ] 天空每10秒掉落一个随机太阳（25阳光）
- [ ] 太阳可以点击收集
- [ ] 点击太阳后飞向顶部阳光计数器
- [ ] 阳光数量正确增加
- [ ] 太阳在8秒后自动消失（如果未收集）

### 8. 僵尸生成和移动测试

- [ ] 第1波僵尸在游戏开始后生成
- [ ] 僵尸从屏幕右侧进入
- [ ] 僵尸向左移动
- [ ] 僵尸显示生命值条
- [ ] 僵尸有行走动画（左右摇晃）

### 9. 战斗系统测试

1. **豌豆射手攻击：**
   - [ ] 豌豆射手每2秒发射一个豌豆
   - [ ] 豌豆向右飞行
   - [ ] 豌豆击中僵尸后消失
   - [ ] 僵尸生命值减少
   - [ ] 僵尸受伤时闪烁

2. **僵尸攻击植物：**
   - [ ] 僵尸碰到植物时停下
   - [ ] 僵尸每1秒攻击植物
   - [ ] 植物生命值减少
   - [ ] 植物受伤时闪烁
   - [ ] 植物生命值归零后消失

3. **坚果墙测试：**
   - [ ] 坚果墙可以种植
   - [ ] 坚果墙有高生命值（600）
   - [ ] 坚果墙可以阻挡僵尸
   - [ ] 僵尸会攻击坚果墙

### 10. 波次系统测试

- [ ] 第1波结束后，25秒后开始第2波
- [ ] 底部提示显示"下一波僵尸即将到来"
- [ ] 顶部波次显示正确更新
- [ ] 每波僵尸数量递增
- [ ] 第5波显示"一大波僵尸正在接近！这是最后一波！"

### 11. 游戏结束测试

**胜利条件：**
- [ ] 消灭所有5波僵尸后显示胜利界面
- [ ] 显示消灭僵尸数量
- [ ] 显示损失植物数量
- [ ] 显示剩余阳光
- [ ] 显示"解锁下一关卡"提示
- [ ] "下一关"按钮可用
- [ ] "重玩本关"按钮可用
- [ ] "返回菜单"按钮可用

**失败条件：**
- [ ] 僵尸到达左侧边界时显示失败界面
- [ ] 显示失败原因："僵尸吃掉了你的脑子！"
- [ ] 显示游戏提示
- [ ] "重新挑战"按钮可用
- [ ] "返回菜单"按钮可用

### 12. 暂停功能测试

- [ ] 点击暂停按钮
- [ ] 游戏暂停（僵尸、植物、子弹停止移动）
- [ ] 显示暂停菜单
- [ ] "继续游戏"按钮恢复游戏
- [ ] "重新开始"按钮重启关卡
- [ ] "返回主菜单"按钮返回主菜单

### 13. 进度保存测试

1. **完成关卡1：**
   - [ ] 胜利后关卡2解锁
   - [ ] 刷新页面
   - [ ] 关卡选择界面显示关卡1已完成（星标）
   - [ ] 关卡2显示为已解锁
   - [ ] 寒冰射手已解锁

2. **重置进度：**
   - [ ] 点击主菜单"重置进度"
   - [ ] 显示确认对话框
   - [ ] 确认后进度清空
   - [ ] 刷新页面
   - [ ] 只有关卡1可玩

### 14. 游戏说明界面测试

- [ ] 点击"游戏说明"按钮
- [ ] 显示游戏目标
- [ ] 显示基础操作
- [ ] 显示所有植物介绍
- [ ] 显示所有僵尸介绍
- [ ] 显示游戏技巧
- [ ] 返回按钮正常工作

### 15. 移动端测试

使用手机或浏览器开发者工具切换到移动设备模式：

- [ ] 布局适配竖屏
- [ ] 网格大小合适
- [ ] 按钮大小适合触摸（至少44×44像素）
- [ ] 触摸操作响应灵敏
- [ ] 没有双击缩放
- [ ] 滚动流畅
- [ ] 植物选择栏可以横向滚动

### 16. 响应式测试

测试不同屏幕尺寸：

**手机（< 768px）：**
- [ ] 网格单元格：90×100px
- [ ] 字体大小：14px
- [ ] 布局紧凑但可操作

**平板（768px - 1024px）：**
- [ ] 网格单元格：100×120px
- [ ] 字体大小：16px

**桌面（> 1024px）：**
- [ ] 网格单元格：110×130px
- [ ] 字体大小：18px
- [ ] 最大宽度：600px，居中显示

### 17. 性能测试

- [ ] 游戏循环流畅，FPS ≥ 50
- [ ] 多个僵尸和植物同时存在时不卡顿
- [ ] 内存占用 < 100MB
- [ ] 操作响应延迟 < 100ms
- [ ] 页面首次加载 < 2秒

### 18. 浏览器兼容性测试

- [ ] Chrome 最新版
- [ ] Firefox 最新版
- [ ] Safari 最新版
- [ ] Edge 最新版
- [ ] 移动端Chrome
- [ ] 移动端Safari

## 常见问题排查

### 问题1：页面无法加载
- 检查是否启动了本地服务器
- 检查浏览器控制台是否有错误
- 尝试清除浏览器缓存

### 问题2：游戏不响应
- 打开浏览器开发者工具（F12）
- 查看Console标签是否有JavaScript错误
- 检查网络请求是否正常

### 问题3：样式显示不正常
- 确认style.css文件存在
- 检查Bootstrap CDN是否加载成功
- 查看Network标签检查CSS文件加载情况

### 问题4：游戏进度丢失
- 检查浏览器是否禁用了localStorage
- 打开开发者工具 -> Application -> Local Storage
- 查看是否有 `pvz_game_data` 键

### 问题5：移动端无法操作
- 检查meta viewport标签是否正确
- 确认触摸事件是否被阻止
- 测试按钮的最小触摸区域

## 性能分析

使用Chrome DevTools进行性能分析：

1. 打开开发者工具（F12）
2. 切换到Performance标签
3. 开始录制
4. 玩游戏30秒
5. 停止录制
6. 分析FPS、内存使用和主线程活动

## Bug报告模板

如发现问题，请按以下格式报告：

```
**问题描述：**
简要描述问题

**重现步骤：**
1. 步骤1
2. 步骤2
3. ...

**期望行为：**
应该发生什么

**实际行为：**
实际发生了什么

**环境信息：**
- 浏览器：Chrome 120
- 操作系统：Windows 10
- 设备：桌面/手机
- 屏幕分辨率：1920×1080

**截图：**
如有可能，请附上截图

**控制台错误：**
浏览器控制台中的错误信息
```

## 测试完成检查清单

- [ ] 所有主要功能正常工作
- [ ] 5个关卡都可以通关
- [ ] 进度保存和加载正常
- [ ] 移动端适配良好
- [ ] 性能达标
- [ ] 浏览器兼容性良好
- [ ] 无明显bug

---

**测试完成后，游戏即可发布到Netlify！**

